<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุนุจุงุณ ุฃุดูุงู - ุตูุญุฉ ุงูุนููุงุก</title>
    <link rel="stylesheet" href="styles.css">
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <!-- ุงูุฎูููุฉ ุงูููููุฉ -->
    <div class="stars"></div>
    
    <!-- ุชุฃุซูุฑ ุงูุณูุงุฑุฉ ุงููุชุญุฑูุฉ -->
    <div class="car-animation">
        <div class="road"></div>
        <div class="car">
            <div class="car-roof"></div>
            <div class="car-body"></div>
            <div class="car-wheel front"></div>
            <div class="car-wheel back"></div>
        </div>
    </div>
    
    <!-- ุงูููุฏุฑ -->
    <header>
        <div class="logo-container">
            <div class="logo-icon">๐</div>
            <h1 class="slogan">ุณูุงูุฉ ูุฑูุจุชูู ุฃููููุชูุง</h1>
            <p class="brand-name">ุนุจุงุณ ุฃุดูุงู</p>
        </div>
    </header>
    
    <!-- ุดุฑูุท ุงูุชููู -->
    <nav>
        <a href="clients.html" class="active">ุตูุญุฉ ุงูุนููุงุก</a>
        <a href="mechanic.html">ุตูุญุฉ ุงููููุงูููู</a>
    </nav>
    
    <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
    <main>
        <section class="booking-section">
            <h2>๐ ุญุฌุฒ ููุนุฏ ุตูุงูุฉ</h2>
            
            <!-- ุฑุณุงุฆู ุงูุชูุจูู -->
            <div id="successAlert" class="alert success">
                โ ุชู ุญุฌุฒ ุงูููุนุฏ ุจูุฌุงุญ! ุณูุชูุงุตู ูุนู ูุฑูุจุงู
            </div>
            <div id="errorAlert" class="alert error">
                โ ูุฑุฌู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ
            </div>
            
            <!-- ูููุฐุฌ ุงูุญุฌุฒ -->
            <form id="bookingForm">
                <div class="form-group">
                    <label for="customerName">๐ค ุงูุงุณู ุงููุงูู *</label>
                    <input type="text" id="customerName" name="customerName" required
                           placeholder="ุฃุฏุฎู ุงุณูู ุงููุงูู">
                </div>
                
                <div class="form-group">
                    <label for="phoneNumber">๐ฑ ุฑูู ุงููุงุชู *</label>
                    <input type="tel" id="phoneNumber" name="phoneNumber" required
                           placeholder="ุฃุฏุฎู ุฑูู ูุงุชูู" pattern="[0-9]{10,15}">
                </div>
                
                <div class="form-group">
                    <label for="carType">๐ ููุน ุงูุณูุงุฑุฉ *</label>
                    <select id="carType" name="carType" required>
                        <option value="">ุงุฎุชุฑ ููุน ุงูุณูุงุฑุฉ</option>
                        <option value="Toyota">ุชูููุชุง (Toyota)</option>
                        <option value="Honda">ูููุฏุง (Honda)</option>
                        <option value="Nissan">ููุณุงู (Nissan)</option>
                        <option value="BMW">ุจู ุฅู ุฏุจููู (BMW)</option>
                        <option value="Mercedes">ูุฑุณูุฏุณ (Mercedes)</option>
                        <option value="Audi">ุฃูุฏู (Audi)</option>
                        <option value="Hyundai">ููููุฏุงู (Hyundai)</option>
                        <option value="Kia">ููุง (Kia)</option>
                        <option value="Ford">ููุฑุฏ (Ford)</option>
                        <option value="Chevrolet">ุดููุฑูููู (Chevrolet)</option>
                        <option value="Other">ุฃุฎุฑู</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="carModel">๐ ููุฏูู ุงูุณูุงุฑุฉ</label>
                    <input type="text" id="carModel" name="carModel"
                           placeholder="ูุซุงู: ููุฑููุง 2020">
                </div>
                
                <div class="form-group">
                    <label for="issue">๐ง ูุตู ุงูุนุทู ุฃู ุงูุฎุฏูุฉ ุงููุทููุจุฉ *</label>
                    <textarea id="issue" name="issue" required
                              placeholder="ุงุดุฑุญ ุงููุดููุฉ ุงูุชู ุชูุงุฌููุง ุฃู ุงูุฎุฏูุฉ ุงูุชู ุชุญุชุงุฌูุง ุจุงูุชูุตูู..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="appointmentDate">๐ ุชุงุฑูุฎ ุงูููุนุฏ *</label>
                    <input type="date" id="appointmentDate" name="appointmentDate" required>
                </div>
                
                <div class="form-group">
                    <label for="appointmentTime">โฐ ููุช ุงูููุนุฏ *</label>
                    <select id="appointmentTime" name="appointmentTime" required>
                        <option value="">ุงุฎุชุฑ ุงูููุช ุงูููุงุณุจ</option>
                        <option value="09:00">09:00 ุตุจุงุญุงู</option>
                        <option value="10:00">10:00 ุตุจุงุญุงู</option>
                        <option value="11:00">11:00 ุตุจุงุญุงู</option>
                        <option value="12:00">12:00 ุธูุฑุงู</option>
                        <option value="13:00">01:00 ุจุนุฏ ุงูุธูุฑ</option>
                        <option value="14:00">02:00 ุจุนุฏ ุงูุธูุฑ</option>
                        <option value="15:00">03:00 ุจุนุฏ ุงูุธูุฑ</option>
                        <option value="16:00">04:00 ุจุนุฏ ุงูุธูุฑ</option>
                        <option value="17:00">05:00 ุจุนุฏ ุงูุธูุฑ</option>
                    </select>
                </div>
                
                <button type="submit" class="submit-btn">
                    โ ุฅุฑุณุงู ุทูุจ ุงูุญุฌุฒ
                </button>
            </form>
        </section>
        
        <!-- ูุณู ุญุฌูุฒุงุช ุงูุนููู -->
        <section class="my-bookings">
            <h2>๐ ุญุฌูุฒุงุชู ุงูุณุงุจูุฉ</h2>
            <div class="table-container">
                <table id="myBookingsTable">
                    <thead>
                        <tr>
                            <th>ุงูุชุงุฑูุฎ</th>
                            <th>ุงูููุช</th>
                            <th>ููุน ุงูุณูุงุฑุฉ</th>
                            <th>ุงูุนุทู</th>
                            <th>ุงูุญุงูุฉ</th>
                        </tr>
                    </thead>
                    <tbody id="myBookingsBody">
                        <!-- ุณูุชู ุฅุถุงูุฉ ุงูุญุฌูุฒุงุช ููุง ุจูุงุณุทุฉ JavaScript -->
                    </tbody>
                </table>
            </div>
            <p id="noBookingsMessage" style="text-align: center; color: var(--primary-color); margin-top: 20px;">
                ูุง ุชูุฌุฏ ุญุฌูุฒุงุช ุณุงุจูุฉ
            </p>
        </section>
    </main>
    
    <!-- ุงูุชุฐููู -->
    <footer>
        <p>ยฉ 2024 ุนุจุงุณ ุฃุดุงูู - ูุฑูุฒ ุตูุงูุฉ ุณูุงุฑุงุช ูุชุฎุตุต</p>
        <div class="contact-info">
            <p>๐ ุงูุนููุงู: ุดุงุฑุน ุงููููุงูููุงุ ุงููุฏููุฉ ุงูุตูุงุนูุฉ</p>
            <p>๐ ุงููุงุชู: +966 50 123 4567</p>
            <p>โฐ ุณุงุนุงุช ุงูุนูู: ุงูุณุจุช - ุงูุฎููุณ: 9 ุตุจุงุญุงู - 6 ูุณุงุกู</p>
        </div>
    </footer>

    <script>
        // ุชุนููู ุงูุชุงุฑูุฎ ุงูุฃุฏูู ููููู ุงูููู
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('appointmentDate').setAttribute('min', today);
        
        // ูุนุงูุฌุฉ ุชูุฏูู ุงููููุฐุฌ
        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // ุฌูุน ุงูุจูุงูุงุช ูู ุงููููุฐุฌ
            const bookingData = {
                id: Date.now(), // ูุนุฑู ูุฑูุฏ ููุญุฌุฒ
                customerName: document.getElementById('customerName').value,
                phoneNumber: document.getElementById('phoneNumber').value,
                carType: document.getElementById('carType').value,
                carModel: document.getElementById('carModel').value || 'ุบูุฑ ูุญุฏุฏ',
                issue: document.getElementById('issue').value,
                appointmentDate: document.getElementById('appointmentDate').value,
                appointmentTime: document.getElementById('appointmentTime').value,
                status: 'pending', // ุญุงูุฉ ุงูุญุฌุฒ: pending ุฃู confirmed
                createdAt: new Date().toISOString()
            };
            
            // ุชุฎุฒูู ุงูุจูุงูุงุช ูู LocalStorage
            saveBooking(bookingData);
            
            // ุฅุธูุงุฑ ุฑุณุงูุฉ ุงููุฌุงุญ
            showAlert('success');
            
            // ุฅุนุงุฏุฉ ุชุนููู ุงููููุฐุฌ
            this.reset();
            
            // ุชุญุฏูุซ ุฌุฏูู ุญุฌูุฒุงุช ุงูุนููู
            displayMyBookings();
            
            // ุฅุฎูุงุก ุฑุณุงูุฉ ุงููุฌุงุญ ุจุนุฏ 5 ุซูุงูู
            setTimeout(() => {
                hideAlert('success');
            }, 5000);
        });
        
        // ุฏุงูุฉ ุญูุธ ุงูุญุฌุฒ ูู LocalStorage
        function saveBooking(booking) {
            let bookings = JSON.parse(localStorage.getItem('carServiceBookings')) || [];
            bookings.push(booking);
            localStorage.setItem('carServiceBookings', JSON.stringify(bookings));
        }
        
        // ุฏุงูุฉ ุฅุธูุงุฑ ุฑุณุงูุฉ ุงูุชูุจูู
        function showAlert(type) {
            const alertId = type === 'success' ? 'successAlert' : 'errorAlert';
            document.getElementById(alertId).classList.add('show');
        }
        
        // ุฏุงูุฉ ุฅุฎูุงุก ุฑุณุงูุฉ ุงูุชูุจูู
        function hideAlert(type) {
            const alertId = type === 'success' ? 'successAlert' : 'errorAlert';
            document.getElementById(alertId).classList.remove('show');
        }
        
        // ุฏุงูุฉ ุนุฑุถ ุญุฌูุฒุงุช ุงูุนููู
        function displayMyBookings() {
            const phoneNumber = localStorage.getItem('currentCustomerPhone');
            const bookings = JSON.parse(localStorage.getItem('carServiceBookings')) || [];
            
            // ุชุตููุฉ ุงูุญุฌูุฒุงุช ุญุณุจ ุฑูู ุงููุงุชู ุฅุฐุง ูุงู ููุฌูุฏุงู
            let myBookings = phoneNumber 
                ? bookings.filter(b => b.phoneNumber === phoneNumber)
                : bookings.slice(-5); // ุนุฑุถ ุขุฎุฑ 5 ุญุฌูุฒุงุช ุฅุฐุง ูู ูุญุฏุฏ ุฑูู ูุงุชู
            
            const tbody = document.getElementById('myBookingsBody');
            const noBookingsMessage = document.getElementById('noBookingsMessage');
            
            tbody.innerHTML = '';
            
            if (myBookings.length === 0) {
                noBookingsMessage.style.display = 'block';
                return;
            }
            
            noBookingsMessage.style.display = 'none';
            
            // ุชุฑุชูุจ ุงูุญุฌูุฒุงุช ูู ุงูุฃุญุฏุซ ุฅูู ุงูุฃูุฏู
            myBookings.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            myBookings.forEach(booking => {
                const row = document.createElement('tr');
                row.classList.add('hover-zoom');
                
                const statusClass = booking.status === 'confirmed' ? 'confirmed' : 'pending';
                const statusText = booking.status === 'confirmed' ? 'โ ูุคูุฏ' : 'โณ ููุฏ ุงูุงูุชุธุงุฑ';
                
                row.innerHTML = `
                    <td>${formatDate(booking.appointmentDate)}</td>
                    <td>${booking.appointmentTime}</td>
                    <td>${booking.carType} - ${booking.carModel}</td>
                    <td>${truncateText(booking.issue, 30)}</td>
                    <td><span class="status ${statusClass}">${statusText}</span></td>
                `;
                
                tbody.appendChild(row);
            });
        }
        
        // ุฏุงูุฉ ุชูุณูู ุงูุชุงุฑูุฎ
        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('ar-SA', options);
        }
        
        // ุฏุงูุฉ ุชูุตูุฑ ุงููุต
        function truncateText(text, maxLength) {
            if (text.length <= maxLength) return text;
            return text.substring(0, maxLength) + '...';
        }
        
        // ุชุญููู ุญุฌูุฒุงุช ุงูุนููู ุนูุฏ ูุชุญ ุงูุตูุญุฉ
        window.addEventListener('load', function() {
            displayMyBookings();
            
            // ุญูุธ ุฑูู ุงููุงุชู ุงูุญุงูู ุฅุฐุง ุชู ุฅุฏุฎุงูู
            const currentPhone = localStorage.getItem('currentCustomerPhone');
            if (currentPhone) {
                document.getElementById('phoneNumber').value = currentPhone;
            }
        });
        
        // ุญูุธ ุฑูู ุงููุงุชู ุนูุฏ ุงูุฅุฏุฎุงู
        document.getElementById('phoneNumber').addEventListener('change', function() {
            localStorage.setItem('currentCustomerPhone', this.value);
        });
    </script>
</body>
</html>
